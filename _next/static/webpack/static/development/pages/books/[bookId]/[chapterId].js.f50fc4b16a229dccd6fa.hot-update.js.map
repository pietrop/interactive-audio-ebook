{"version":3,"file":"static/webpack/static/development/pages/books/[bookId]/[chapterId].js.f50fc4b16a229dccd6fa.hot-update.js","sources":["webpack:///./pages/books/[bookId]/[chapterId].js"],"sourcesContent":["import {useState, useRef} from 'react';\nimport { useRouter } from 'next/router';\nimport calculateWordDuration from '../../../utils/calculate-word-duration';\nconst getData = async (id)=>{\n    return import( `../../../prep-utils/json/${id}.json`).then(({default: myData}) => myData);\n   }\n\nconst Chapter = () => {\n  const router = useRouter()\n  const { chapterId, bookId } = router.query\n  const [chapterData, setChapterData] = useState();\n  const [bookTitle, setBookTitle] = useState(\"\");\n  const audioRef = useRef();\n  getData(bookId).then((res)=>{\n    console.log('data 59', res);\n    // setBookData(res);\n    console.log('chapterId',chapterId)\n    setBookTitle(res.title);\n    // adjusting chapter id with array index\n    const currentChapter = res.chapters[parseInt(chapterId)-1];\n    setChapterData(currentChapter)\n   }).catch((err)=>{\n     console.error(\"couldn 't find book id\", bookId)\n   })\n\n   const handleTextClick = (e)=>{\n       const index = parseInt(e.target.id);\n    //    console.log()\n       const wordList = chapterData.text.split(' ');\n       const removeCount = wordList.length - index;\n       wordList.splice( index, removeCount )\n       const estimatedTimeOffset = wordList.reduce((total, word)=>{\n            const wordDuration = calculateWordDuration(word);\n            total += parseFloat(wordDuration);\n            return total;\n       }, 0)\n\n       console.log('estimatedTimeOffset',estimatedTimeOffset)\n       audioRef.current.currentTime  = estimatedTimeOffset;\n       audioRef.current.play()\n   }\n\n\nreturn (<>\n  <style jsx>{`\n     .before {\n      color: black;\n  }\n  \n  .after {\n      color: grey;\n  }\n  \n  \n  /* for index page */\n  \n  .transcriptBtn {\n      border: 0.1rem solid lightgrey;\n      border-radius: 0.5em;\n      padding: 0.5em;\n      font-family: Retina, Arial, Helvetica, sans-serif;\n      color: #333;\n      font-weight: 200;\n  }\n  \n  .transcriptBtn:hover {\n      background-color: lightgray;\n      color: white;\n  }\n  \n  .article_title {\n      font-family: Escrow Condensed, Georgia, serif;\n      font-weight: 700;\n      font-size: 30px;\n      line-height: 34px;\n      color: #333;\n  }\n  \n  h2.article_title {\n      margin-top: 0.5em;\n      margin-bottom: 0.2em;\n  }\n  \n  .description {\n      font-family: Retina, Arial, Helvetica, sans-serif;\n      font-weight: 400;\n      font-size: 16px;\n      line-height: 22px;\n      color: #666;\n  }\n  \n  ul {\n      list-style-type: none;\n  }\n  \n  li a {\n      color: black;\n      text-decoration: none;\n  }\n  \n  li {\n      padding-bottom: 0.5em;\n  }\n  \n  hr {\n      border-top: 1px solid lightgrey;\n  }\n  \n  \n  /* for show page */\n  \n  .article_header {\n      margin-top: 10vh;\n      /* margin-bottom: 4px; */\n      font-size: 40px;\n      line-height: 1.2em;\n      font-family: Escrow Condensed, Chronicle Display, serif;\n      font-weight: 700;\n  }\n  \n  .words {\n      cursor: pointer;\n      margin-bottom: 17px;\n      font-size: 17px;\n      line-height: 27px;\n      word-wrap: break-word;\n      font-family: Exchange, Chronicle SSm, serif;\n      font-weight: 400;\n  }\n  \n  .words:hover:before {\n      content: \"â–¶\";\n      color: blue;\n      opacity: 0.6;\n      position: absolute;\n      margin-top: -12px;\n  }\n  \n  .containerAudio {\n      position: fixed;\n      background-color: white;\n      height: 3em;\n      padding-bottom: 1em;\n      padding-top: 0.5em;\n      top: 0px;\n  }\n  \n  audio {\n      /* display: none; */\n      width: 100%;\n  }\n  \n  \n  /* Mobile phones */\n  \n  @media only screen and (max-width: 768px) {\n      .container {\n          width: 100%;\n      }\n      .containerAudio {\n          width: 100%;\n      }\n  }\n  \n  \n  /* Tablets, Ipads (portrait) */\n  \n  @media (min-width: 769px) and (max-width: 1024px) {\n      .container {\n          width: 70%;\n          padding-left: 15%;\n          padding-right: 15%;\n      }\n      .containerAudio {\n          width: 70%;\n          padding-left: 15%;\n          padding-right: 15%;\n      }\n  }\n  \n  \n  /* Laptops, Desktops */\n  \n  @media (min-width: 1025px) and (max-width: 1280px) {\n      .container {\n          width: 50%;\n          padding-left: 25%;\n          padding-right: 25%;\n      }\n      .containerAudio {\n          width: 50%;\n          padding-left: 25%;\n          padding-right: 25%;\n      }\n  }\n  \n  \n  /* Desktops */\n  \n  @media (min-width: 1281px) {\n      .container {\n          width: 50%;\n          padding-left: 25%;\n          padding-right: 25%;\n      }\n      .containerAudio {\n          width: 50%;\n          padding-left: 25%;\n          padding-right: 25%;\n      }\n  }\n  `}</style>\n  <style jsx global>{`\n  audio{\n      position: fixed;\n      bottom: 0;\n      left: 0px;\n  }\n  `}</style>\n    <h2>{chapterData && chapterData.title} - {bookTitle&&bookTitle}</h2>\n  {chapterData && chapterData.duration} \n  {chapterData && ( <audio  ref={audioRef} src={chapterData.url} controls type={chapterData.type} /> )}\n  <article onClick={handleTextClick}>\n    {chapterData && chapterData.text.split(' ').map((word, index)=>{ return <span id={index}>{word} </span>})}\n  </article>\n\n  \n  </>)\n}\n\nexport default Chapter\n\nChapter.getInitialProps = async ctx => {\n    // const res = await fetch('https://api.github.com/repos/zeit/next.js')\n    // const json = await res.json()\n    return { }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}